---
title: hexo博客个性化设置
layout: info
commentable: true
date: 2020-08-08
mathjax: true
mermaid: true
tags: [Blog,Node.js]
categories: 
-	Blog
description: Hexo是一款基于Node.js的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在GitHub和Coding上，是搭建博客的首选框架。
---

### 创建categories

1. **新建一个页面，命名为categories。命令如下：**

   ```
   npx hexo new page categories
   ```

   在myBlog/source下会新生成一个新的文件夹categories
   ，在该文件夹下会有一个index.md文件。

2. **编辑categories文件夹下的index.md**

   ```
   ---
   title: categories
   date: 2020-08-07 10:29:47
   type: "categories"
   comments: false
   ---
   ```

3. **在菜单中添加链接。**

   编辑主题的 `_config.next.yml`，将menu中的 categories: /categories 注释去掉，如下:

   ```
   categories: /categories/ || fa fa-fw fa-th
   ```
   
4. **安装依赖**

   ```
   npm install hexo-generator-index --save
   npm install hexo-generator-archive --save
   npm install hexo-generator-category --save
   npm install hexo-generator-tag --save
   ```

参考：https://github.com/hexojs/hexo/wiki/Migrating-from-2.x-to-3.0

### 添加sitemap

站点地图是一种文件，您可以通过该文件列出您网站上的网页，从而将您网站内容的组织架构告知Google和其他搜索引擎。Googlebot等搜索引擎网页抓取工具会读取此文件，以便更加智能地抓取您的网站。

1. 安装插件：

   ```
   npm install hexo-generator-sitemap --save
   npm install hexo-generator-baidu-sitemap --save
   ```

2. 在博客目录的_config.yml中添加如下代码：

   ```
   # 自动生成sitemap
   sitemap:
       path: sitemap.xml
   baidusitemap:
       path: baidusitemap.xml
   ```

3. 编译博客

   ```
   npx hexo generate
   ```

4. 在你的博客根目录的public下面发现生成了sitemap.xml以及baidusitemap.xml就表示成功了。

### 添加README.md

#### 添加README.md

使用 Github Pages 和 Hexo 搭建的博客，如果在最开始建立仓库的时候没有创建README.md文件，那么在后期如何添加呢？

添加方法：在根目录 source 文件夹下新建README.md即可。

新增：[source/README.md](https://github.com/Jueee/jueee-blog/blob/master/source/README.md)

效果：[https://github.com/Jueee/jueee.github.io](https://github.com/Jueee/jueee.github.io)

#### 显示异常

当我们执行 `hexo g -d` 部署博客的时候会发现README.md变成了 README.html。

原因就在于当我们在执行 `hexo g -d` 命令时，.md 文件会被转化成 HTML 文件，并将这些文件放到 public 目录里，最后再提交到远程 GitHub 仓库。

而 Hexo 也提供了一个方法，让md文件不被转换成HTML，在根目录的 _config.yml 配置文件里，找到 skip_render 关键字，添加 README.md，让解释器跳过渲染：

```yml
skip_render:
  - README.md
```

### 修改脚注

修改文件： `source\_data\footer.njk`

```html
<div class="footer-custom">
  <div class="powered-by">由 <a href="https://github.com/next-theme/theme-next-docs" class="theme-link" rel="noopener" target="_blank">Hexo</a> v8.0.0 驱动</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://github.com/next-theme/hexo-theme-next" class="theme-link" rel="noopener" target="_blank">Hexo.NexT</a> v8.0.0</div>
</div>
```

### 代码高亮

由于 Hexo 自带的代码高亮主题显示不好看，所以主题中使用到了[hexo-prism-plugin](https://github.com/ele828/hexo-prism-plugin)的 Hexo 插件来做代码高亮，安装命令如下：

bash

```bash
npm i -S hexo-prism-plugin
```

然后，修改 Hexo 根目录下`_config.yml`文件中`highlight.enable`的值为`false`，并新增`prism`插件相关的配置，主要配置如下：

```yml
highlight:
  enable: false

prism_plugin:
  mode: 'preprocess'    # realtime/preprocess
  theme: 'tomorrow'
  line_number: false    # default false
  custom_css:
```

配置参考：[https://www.npmjs.com/package/hexo-prism-plugin](https://www.npmjs.com/package/hexo-prism-plugin)

### 修改菜单

将导航栏的 “归档” 修改为 “博客”。

修改文件： `source\_data\languages.yml`

```yml
zh-CN:
  menu:
    archives: 博客
```

### 相关热门帖子

[NexT](https://github.com/tea3/hexo-related-popular-posts)根据[hexo-related-popular-posts](https://github.com/tea3/hexo-related-popular-posts)支持相关的帖子功能.

`hexo-related-popular-posts`通过执行以下命令来安装网站根目录:

```bash
$ npm install hexo-related-popular-posts
$ npx hexo clean
```

可以通过将值设置`related_posts.enable`为`true`in 来启用它主题配置文件.

```yml
related_posts:
  enable: true
```

### 添加评论系统

Valine是基于Leancloud的快速，简单和高效的无后端评论系统。

1. 创建一个帐户或登录 [LeanCloud](https://leancloud.cn/dashboard/login.html#/signin)，然后单击左下角以[创建应用程序](https://leancloud.cn/dashboard/applist.html#/newapp)在[仪表板中](https://leancloud.cn/dashboard/applist.html#/apps).

2. 转到您刚创建的应用程序，`Settings → App Keys`在左下角选择，您将看到您的APP ID和APP Key。

3. 将值设置`enable`为`true`，添加获得的APP ID（`appId`）和APP Key（`appKey`），然后`valine`在主题配置文件 如下：

   ```
   valine:
     enable: false
     appId:  # your leancloud application appid
     appKey:  # your leancloud application appkey
     placeholder: Just go go # comment box placeholder
     avatar: mm # gravatar style
     meta: [nick, mail, link] # Custom comment header
     pageSize: 10 # pagination size
     visitor: false # leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html
     comment_count: true # If false, comment count will only be displayed in post page, not in home page
     recordIP: false # Whether to record the commenter IP
     serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)
   ```

### 分析工具

#### 谷歌分析

1. 创建一个帐户并登录[Google Analytics（分析）](https://analytics.google.com/)。[更详细的文档](https://support.google.com/analytics/?hl=en#topic=3544906)

2. 编辑 主题配置文件并`tracking_id`在部分下填写`google_analytics`您的Google跟踪ID。Google曲目ID始终以开头`UA-`。

   ```yml
   # Google Analytics
   google_analytics:
     tracking_id: UA-XXXXXXXX-X
     only_pageview: false
   ```

3. 当field `only_pageview`设置为true时，NexT将仅向`pageview`Google Analytics（分析）发送事件。
   使用它而不是使用它的好处`only_pageview: false`是减少了站点上的外部脚本，这将为您提供更好的性能，但没有完整的分析功能。

#### 百度分析

1. 登录[百度分析](https://tongji.baidu.com/) 并找到网站代码获取页面。

2. 在后面复制脚本ID `hm.js?`，如下图：

   ![1597041510807](/images/2020/08/1597041510807.png)

3. 编辑 主题配置文件并将部分更改`baidu_analytics`为您的脚本ID。

   ```yml
   # Baidu Analytics ID
   baidu_analytics: your_id
   ```

